@import "tailwindcss";

@theme {
  /* Светло-серый фон как на скриншоте */
  --color-background: hsl(240 8% 97%);
  --color-foreground: hsl(240 10% 20%);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(240 10% 20%);
  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(240 10% 20%);
  
  /* Синий/индиго акцентный цвет как на скриншоте */
  --color-primary: hsl(243 75% 59%);
  --color-primary-foreground: hsl(0 0% 100%);
  --color-secondary: hsl(240 5% 96%);
  --color-secondary-foreground: hsl(240 10% 20%);
  --color-muted: hsl(240 5% 96%);
  --color-muted-foreground: hsl(240 5% 45%);
  --color-accent: hsl(240 5% 96%);
  --color-accent-foreground: hsl(240 10% 20%);
  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(0 0% 100%);
  --color-border: hsl(240 6% 90%);
  --color-input: hsl(240 6% 90%);
  --color-ring: hsl(243 75% 59%);
  
  --radius-lg: 0.75rem;
  --radius-md: calc(0.75rem - 2px);
  --radius-sm: calc(0.75rem - 4px);
}

@layer base {
  :root {


    --bg-primary: hsl(240 8% 97%);
    --bg-secondary: hsl(240 5% 96%);
    --bg-input: hsl(240 6% 90%);
    --text-primary: hsl(240 10% 20%);
    --text-secondary: hsl(240 5% 45%);
    --border-color: hsl(240 6% 90%);
    --accent-color: hsl(243 75% 59%);
    --hover-color: hsl(240 5% 94%);
    --error-color: hsl(0 84.2% 60.2%);
    --success-color: hsl(142 76% 36%);
    --warning-color: hsl(38 92% 50%);
    --info-color: hsl(199 89% 48%);

    --sidebar-width: 260px;
    --header-height: 60px;
  }

  .dark {
    --color-background: hsl(222.2 84% 4.9%);
    --color-foreground: hsl(210 40% 98%);
    --color-card: hsl(222.2 84% 4.9%);
    --color-card-foreground: hsl(210 40% 98%);
    --color-popover: hsl(222.2 84% 4.9%);
    --color-popover-foreground: hsl(210 40% 98%);
    --color-primary: hsl(217.2 91.2% 59.8%);
    --color-primary-foreground: hsl(222.2 47.4% 11.2%);
    --color-secondary: hsl(217.2 32.6% 17.5%);
    --color-secondary-foreground: hsl(210 40% 98%);
    --color-muted: hsl(217.2 32.6% 17.5%);
    --color-muted-foreground: hsl(215 20.2% 65.1%);
    --color-accent: hsl(217.2 32.6% 17.5%);
    --color-accent-foreground: hsl(210 40% 98%);
    --color-destructive: hsl(0 62.8% 30.6%);
    --color-destructive-foreground: hsl(210 40% 98%);
    --color-border: hsl(217.2 32.6% 17.5%);
    --color-input: hsl(217.2 32.6% 17.5%);
    --color-ring: hsl(224.3 76.3% 48%);

    /* Legacy variables for backward compatibility */
    --bg-primary: hsl(222.2 84% 4.9%);
    --bg-secondary: hsl(217.2 32.6% 17.5%);
    --bg-input: hsl(217.2 32.6% 17.5%);
    --text-primary: hsl(210 40% 98%);
    --text-secondary: hsl(215 20.2% 65.1%);
    --border-color: hsl(217.2 32.6% 17.5%);
    --accent-color: hsl(217.2 91.2% 59.8%);
    --hover-color: hsl(217.2 32.6% 17.5%);
    --error-color: hsl(0 62.8% 30.6%);
    --success-color: hsl(142 76% 36%);
    --warning-color: hsl(38 92% 50%);
    --info-color: hsl(199 89% 48%);
  }

  * {
    border-color: var(--color-border);
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Белый текст в темной теме */
  .dark textarea,
  .dark input {
    color: hsl(210 40% 98%) !important;
  }
}

html, body {
  height: 100dvh;
  overflow: hidden;
}

#root {
  height: 100dvh;
}

/* Responsive design */
@media (max-width: 768px) {
  :root {
    --sidebar-width: min(280px, 80vw);
  }
}

@media (max-width: 480px) {
  :root {
    --sidebar-width: 100vw;
  }
}

/* Scrollbar styles */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--color-border);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-muted-foreground);
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Utility classes */
.fade-in {
  animation: fadeIn 0.3s ease-out;
}

.slide-in {
  animation: slideIn 0.3s ease-out;
}

.loading {
  animation: spin 1s linear infinite;
}

/* Code highlighting themes */
/* Light theme - show github light styles */
:root .hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #24292e;
  background: #f6f8fa;
}

/* Dark theme - override with github dark styles */
.dark .hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #c9d1d9;
  background: #0d1117;
}

/* Markdown code blocks styling */
.prose pre {
  border-radius: 0.5rem;
  margin: 1em 0;
  overflow-x: auto;
}

.prose code {
  border-radius: 0.25rem;
  font-size: 0.875em;
  word-wrap: break-word;
  white-space: pre-wrap;
}

.prose :where(code):not(:where([class~="not-prose"] *)) {
  font-weight: 400;
}

/* Code block container */
.prose pre code {
  background: transparent !important;
  padding: 0 !important;
  border-radius: 0 !important;
  white-space: pre;
  word-wrap: normal;
}

/* Inline code styling */
.prose :where(code):not(:where(pre *)) {
  padding: 0.125rem 0.25rem;
  font-size: 0.875em;
  font-weight: 600;
  border-radius: 0.25rem;
  white-space: normal;
  word-break: break-word;
}

.prose :where(p):not(:where([class~="not-prose"] *)) {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

/* Убираем лишние отступы в сообщениях */
.prose > :first-child {
  margin-top: 0 !important;
}

.prose > :last-child {
  margin-bottom: 0 !important;
}

/* Ограничение ширины для всех элементов внутри prose */
.prose * {
  box-sizing: border-box;
}

/* Специальные стили для блоков кода в сообщениях */
.prose pre,
.prose pre > div {
  overflow-x: auto !important;
  box-sizing: border-box !important;
}

/* Inline код тоже должен переноситься */
.prose code:not(pre code) {
  word-break: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
}

/* Предотвращаем расширение контейнера */
.prose {
  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: break-word;
  min-width: 0;
  box-sizing: border-box;
}

/* Обработка длинных слов и ссылок */
.prose p,
.prose li,
.prose td,
.prose th,
.prose strong,
.prose b,
.prose em,
.prose i,
.prose a,
.prose span {
  word-break: break-word;
  overflow-wrap: break-word;
}

/* Таблицы не должны выходить за границы */
.prose table {
  display: block;
  overflow-x: auto;
}

/* Ограничение для всех дочерних элементов */
.prose * {
  box-sizing: border-box;
}

/* Стили для скроллбара в блоках кода */
.prose pre::-webkit-scrollbar {
  height: 8px;
}

.prose pre::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

.prose pre::-webkit-scrollbar-thumb {
  background-color: var(--color-border);
  border-radius: 4px;
}

.prose pre::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-muted-foreground);
}

/* Для Firefox */
.prose pre {
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) transparent;
}
